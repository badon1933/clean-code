<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Storage</title>
  <style>
    a {
      color: inherit;
    }

    .dark-mode {
      background-color: #222;
      color: #fff;
    }
  </style>
</head>

<body>

  <h1>Halo, Sandhika!</h1>

  <a href="" onclick="opsiNama('ganti')">Ganti Nama</a>
  <a href="" onclick="opsiNama('hapus')">Hapus Nama</a>
  <a href="" class="toggle">Dark Mode</a>
  <a href="" onclick="hapusStorage()">Hapus Storage</a>

  <script>
    const judul = document.querySelector('h1')

    let nama = localStorage.getItem('nama')
    if (!nama) {
      nama = prompt('Masukkan nama anda: ')
      localStorage.setItem('nama', nama)
    }

    judul.innerHTML = `Halo, ${nama}`

    // Opsi Nama
    const opsiNama = (opsi) => {
      if (opsi === 'ganti') {
        nama = prompt('Masukkan nama baru anda: ')
        localStorage.setItem('nama', nama)
      } else {
        localStorage.removeItem('nama', nama)
      }
      e.preventDefault()
    }

    // Hapus Storage
    const hapusStorage = (e) => {
      localStorage.clear()
      e.preventDefault()
    }

    // Toggle Dark Mode
    const toggle = document.querySelector('.toggle')
    let tema = localStorage.getItem('tema')

    if (!tema) {
      localStorage.setItem('tema', 'light')
    }

    const themeMode = (mode) => {
      if (mode === 'dark') {
        document.body.classList.remove('dark-mode')
        toggle.innerHTML = 'Dark Mode'
        localStorage.setItem('tema', 'light')
      } else {
        document.body.classList.add('dark-mode')
        toggle.innerHTML = 'Light Mode'
        localStorage.setItem('tema', 'dark')
      }
    }

    if (tema === 'dark') {
      themeMode('light')
    }

    toggle.addEventListener('click', function (e) {
      tema = localStorage.getItem('tema')
      themeMode(tema)
      e.preventDefault()
    })

  </script>

</body>

</html>